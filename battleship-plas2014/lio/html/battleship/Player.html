<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Player</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Player.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">battleship</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>Safe</td></tr></table><p class="caption">Player</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>This untrusted module implements the server side of a player, which
communicates with its client side via TCP. When the server prompts the
client for input, it uses &quot;resign&quot; as the quit message (see
<a href="Command.html">Command</a>).
</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">data</span>  <a href="#t:PlacingHandle">PlacingHandle</a> </li><li class="src short"><span class="keyword">data</span>  <a href="#t:ShootingHandle">ShootingHandle</a> </li><li class="src short"><a href="#v:placing">placing</a> :: <a href="Sys.html#t:Handle">Handle</a> -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Bool.html#t:Bool">Bool</a> -&gt; <a href="file:///Users/al24216/Library/Haskell/ghc-7.6.3/lib/lio-0.11.5.0/doc/html/LIO-DCLabel.html#t:DC">DC</a> <a href="Player.html#t:PlacingHandle">PlacingHandle</a></li><li class="src short"><a href="#v:getComplete">getComplete</a> :: <a href="Player.html#t:PlacingHandle">PlacingHandle</a> -&gt; <a href="file:///Users/al24216/Library/Haskell/ghc-7.6.3/lib/lio-0.11.5.0/doc/html/LIO-DCLabel.html#t:DC">DC</a> (<a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Maybe.html#t:Maybe">Maybe</a> (<a href="Board.html#t:Complete">Complete</a>, <a href="Player.html#t:ShootingHandle">ShootingHandle</a>))</li><li class="src short"><span class="keyword">data</span>  <a href="#t:ShotResult">ShotResult</a> <ul class="subs"><li>= <a href="#v:Repeat">Repeat</a>  </li><li>| <a href="#v:Miss">Miss</a>  </li><li>| <a href="#v:Hit">Hit</a>  </li><li>| <a href="#v:Sank">Sank</a> <a href="Ship.html#t:Ship">Ship</a>  </li></ul></li><li class="src short"><a href="#v:shoot">shoot</a> :: <a href="Player.html#t:ShootingHandle">ShootingHandle</a> -&gt; <a href="file:///Users/al24216/Library/Haskell/ghc-7.6.3/lib/lio-0.11.5.0/doc/html/LIO-DCLabel.html#t:DC">DC</a> (<a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Maybe.html#t:Maybe">Maybe</a> (<a href="Board.html#t:Pos">Pos</a>, <a href="Player.html#t:ShotResult">ShotResult</a> -&gt; <a href="file:///Users/al24216/Library/Haskell/ghc-7.6.3/lib/lio-0.11.5.0/doc/html/LIO-DCLabel.html#t:DC">DC</a> ()))</li><li class="src short"><a href="#v:opponentShot">opponentShot</a> :: <a href="Player.html#t:ShootingHandle">ShootingHandle</a> -&gt; <a href="Board.html#t:Pos">Pos</a> -&gt; <a href="file:///Users/al24216/Library/Haskell/ghc-7.6.3/lib/lio-0.11.5.0/doc/html/LIO-DCLabel.html#t:DC">DC</a> ()</li><li class="src short"><a href="#v:won">won</a> :: <a href="Player.html#t:ShootingHandle">ShootingHandle</a> -&gt; <a href="file:///Users/al24216/Library/Haskell/ghc-7.6.3/lib/lio-0.11.5.0/doc/html/LIO-DCLabel.html#t:DC">DC</a> ()</li><li class="src short"><a href="#v:lost">lost</a> :: <a href="Player.html#t:ShootingHandle">ShootingHandle</a> -&gt; <a href="file:///Users/al24216/Library/Haskell/ghc-7.6.3/lib/lio-0.11.5.0/doc/html/LIO-DCLabel.html#t:DC">DC</a> ()</li></ul></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">data</span>  <a name="t:PlacingHandle" class="def">PlacingHandle</a>  </p><div class="doc"><p><em>Placing handle</em> for player -- handle for player during the
 placing phase of game.
</p></div></div><div class="top"><p class="src"><span class="keyword">data</span>  <a name="t:ShootingHandle" class="def">ShootingHandle</a>  </p><div class="doc"><p><em>Shooting handle</em> for player -- handle for player during the shooting
 phase of game.
</p></div></div><div class="top"><p class="src"><a name="v:placing" class="def">placing</a> :: <a href="Sys.html#t:Handle">Handle</a> -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Bool.html#t:Bool">Bool</a> -&gt; <a href="file:///Users/al24216/Library/Haskell/ghc-7.6.3/lib/lio-0.11.5.0/doc/html/LIO-DCLabel.html#t:DC">DC</a> <a href="Player.html#t:PlacingHandle">PlacingHandle</a></p><div class="doc"><p><code><code><a href="Player.html#v:placing">placing</a></code> clnt goFirst</code> returns a <code><a href="file:///Users/al24216/Library/Haskell/ghc-7.6.3/lib/lio-0.11.5.0/doc/html/LIO-DCLabel.html#t:DC">DC</a></code> action that, when run
 with current label <code><a href="file:///Users/al24216/Library/Haskell/ghc-7.6.3/lib/lio-0.11.5.0/doc/html/LIO-DCLabel.html#v:dcPublic">dcPublic</a></code>, starts up a new player, returning
 its placing handle, and leaving the current label and clearance
 unchanged.  The player will use <code>clnt</code> (which must have label
 <code><a href="file:///Users/al24216/Library/Haskell/ghc-7.6.3/lib/lio-0.11.5.0/doc/html/LIO-DCLabel.html#v:dcPublic">dcPublic</a></code>) to communicate with its client side, using the protocol
 of <a href="Command.html">Command</a>, and will go (shoot) first iff <code>goFirst</code>.
</p><p><em>Note</em>: all <code><a href="file:///Users/al24216/Library/Haskell/ghc-7.6.3/lib/lio-0.11.5.0/doc/html/LIO-DCLabel.html#t:DC">DC</a></code> actions <em>derived</em> from the placing handle via the
 following functions must be run with current label <code><a href="file:///Users/al24216/Library/Haskell/ghc-7.6.3/lib/lio-0.11.5.0/doc/html/LIO-DCLabel.html#v:dcPublic">dcPublic</a></code>. They
 all leave the current label and clearance unchanged.  In
 particular, this applies to the <code><a href="file:///Users/al24216/Library/Haskell/ghc-7.6.3/lib/lio-0.11.5.0/doc/html/LIO-DCLabel.html#t:DC">DC</a></code> actions returned by the reply
 functions produced by the <code><a href="file:///Users/al24216/Library/Haskell/ghc-7.6.3/lib/lio-0.11.5.0/doc/html/LIO-DCLabel.html#t:DC">DC</a></code> actions returned by the <code>shoot</code>
 function -- see below.
</p></div></div><div class="top"><p class="src"><a name="v:getComplete" class="def">getComplete</a> :: <a href="Player.html#t:PlacingHandle">PlacingHandle</a> -&gt; <a href="file:///Users/al24216/Library/Haskell/ghc-7.6.3/lib/lio-0.11.5.0/doc/html/LIO-DCLabel.html#t:DC">DC</a> (<a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Maybe.html#t:Maybe">Maybe</a> (<a href="Board.html#t:Complete">Complete</a>, <a href="Player.html#t:ShootingHandle">ShootingHandle</a>))</p><div class="doc"><p><code><code><a href="Player.html#v:getComplete">getComplete</a></code> ph</code> returns a <code><a href="file:///Users/al24216/Library/Haskell/ghc-7.6.3/lib/lio-0.11.5.0/doc/html/LIO-DCLabel.html#t:DC">DC</a></code> action that, when run, waits
 for the player corresponding to the placing handle <code>ph</code> to finish
 placing its ships.  If the player resigns or terminates before
 fully placing its ships, then the <code><a href="file:///Users/al24216/Library/Haskell/ghc-7.6.3/lib/lio-0.11.5.0/doc/html/LIO-DCLabel.html#t:DC">DC</a></code> action returns <code><a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Maybe.html#v:Nothing">Nothing</a></code>;
 otherwise, the <code><a href="file:///Users/al24216/Library/Haskell/ghc-7.6.3/lib/lio-0.11.5.0/doc/html/LIO-DCLabel.html#t:DC">DC</a></code> action returns <code><code><a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Maybe.html#v:Just">Just</a></code>(compl, sh)</code>, where
 <code>compl</code> is the complete placing chosen by the player, and <code>sh</code>
 is the shooting handle for the player.  The <code><a href="file:///Users/al24216/Library/Haskell/ghc-7.6.3/lib/lio-0.11.5.0/doc/html/LIO-DCLabel.html#t:DC">DC</a></code> action returned by
 calling <code><a href="Player.html#v:getComplete">getComplete</a></code> on a given placing handle may only be run
 once.
</p></div></div><div class="top"><p class="src"><span class="keyword">data</span>  <a name="t:ShotResult" class="def">ShotResult</a>  </p><div class="doc"><p>Shot results communicated to shooting player.
</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:Repeat" class="def">Repeat</a></td><td class="doc"><p>An attempt to shoot a position already shot.
</p></td></tr><tr><td class="src"><a name="v:Miss" class="def">Miss</a></td><td class="doc"><p>Miss -- no ship hit.
</p></td></tr><tr><td class="src"><a name="v:Hit" class="def">Hit</a></td><td class="doc"><p>Hit an unspecified ship.
</p></td></tr><tr><td class="src"><a name="v:Sank" class="def">Sank</a> <a href="Ship.html#t:Ship">Ship</a></td><td class="doc"><p>Sank a specified ship -- last of its cells hit.
</p></td></tr></table></div></div><div class="top"><p class="src"><a name="v:shoot" class="def">shoot</a> :: <a href="Player.html#t:ShootingHandle">ShootingHandle</a> -&gt; <a href="file:///Users/al24216/Library/Haskell/ghc-7.6.3/lib/lio-0.11.5.0/doc/html/LIO-DCLabel.html#t:DC">DC</a> (<a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Maybe.html#t:Maybe">Maybe</a> (<a href="Board.html#t:Pos">Pos</a>, <a href="Player.html#t:ShotResult">ShotResult</a> -&gt; <a href="file:///Users/al24216/Library/Haskell/ghc-7.6.3/lib/lio-0.11.5.0/doc/html/LIO-DCLabel.html#t:DC">DC</a> ()))</p><div class="doc"><p><code><code><a href="Player.html#v:shoot">shoot</a></code> sh</code> returns a <code><a href="file:///Users/al24216/Library/Haskell/ghc-7.6.3/lib/lio-0.11.5.0/doc/html/LIO-DCLabel.html#t:DC">DC</a></code> action that, when run, waits for
 the player with shooting handle <code>sh</code> to supply a value of type
 <code><code><a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Maybe.html#t:Maybe">Maybe</a></code>(<code><a href="Board.html#t:Pos">Pos</a></code>, <code><a href="Player.html#t:ShotResult">ShotResult</a></code> -&gt; <code><a href="file:///Users/al24216/Library/Haskell/ghc-7.6.3/lib/lio-0.11.5.0/doc/html/LIO-DCLabel.html#t:DC">DC</a></code>())</code>, and then returns
 this value.
</p><ul><li> If <code><a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Maybe.html#v:Nothing">Nothing</a></code> is supplied, this means the player is resigning.
</li><li> If <code><code><a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Maybe.html#v:Just">Just</a></code>(pos, shotFun)</code> is returned, this means the player has
 chosen to shoot cell <code>pos</code> of the opponent's board. The caller of
 <code><a href="Player.html#v:shoot">shoot</a></code> is then responsible for calling <code>shotFun</code> with the value of
 type <code><a href="Player.html#t:ShotResult">ShotResult</a></code> describing the outcome of this shot, and for then
 running the <code><a href="file:///Users/al24216/Library/Haskell/ghc-7.6.3/lib/lio-0.11.5.0/doc/html/LIO-DCLabel.html#t:DC">DC</a></code> action returned by <code>shotFun</code>, thus communicating this
 outcome back to the player.  (This must be done before any other
 <code><a href="file:///Users/al24216/Library/Haskell/ghc-7.6.3/lib/lio-0.11.5.0/doc/html/LIO-DCLabel.html#t:DC">DC</a></code> actions associated with <code>sh</code> are run.)
</li></ul></div></div><div class="top"><p class="src"><a name="v:opponentShot" class="def">opponentShot</a> :: <a href="Player.html#t:ShootingHandle">ShootingHandle</a> -&gt; <a href="Board.html#t:Pos">Pos</a> -&gt; <a href="file:///Users/al24216/Library/Haskell/ghc-7.6.3/lib/lio-0.11.5.0/doc/html/LIO-DCLabel.html#t:DC">DC</a> ()</p><div class="doc"><p><code><code><a href="Player.html#v:opponentShot">opponentShot</a></code> sh pos</code> returns a <code><a href="file:///Users/al24216/Library/Haskell/ghc-7.6.3/lib/lio-0.11.5.0/doc/html/LIO-DCLabel.html#t:DC">DC</a></code> action that, when
 run, tells the player with shooting handle <code>sh</code> that its
 opponent has shot cell <code>pos</code> of the player's board.
</p></div></div><div class="top"><p class="src"><a name="v:won" class="def">won</a> :: <a href="Player.html#t:ShootingHandle">ShootingHandle</a> -&gt; <a href="file:///Users/al24216/Library/Haskell/ghc-7.6.3/lib/lio-0.11.5.0/doc/html/LIO-DCLabel.html#t:DC">DC</a> ()</p><div class="doc"><p><code><code><a href="Player.html#v:won">won</a></code> sh</code> returns a <code><a href="file:///Users/al24216/Library/Haskell/ghc-7.6.3/lib/lio-0.11.5.0/doc/html/LIO-DCLabel.html#t:DC">DC</a></code> action that, when run, tells the
 player with shooting handle <code>sh</code> that it has won the game.  Once this
 <code><a href="file:///Users/al24216/Library/Haskell/ghc-7.6.3/lib/lio-0.11.5.0/doc/html/LIO-DCLabel.html#t:DC">DC</a></code> action has been run, no <code><a href="file:///Users/al24216/Library/Haskell/ghc-7.6.3/lib/lio-0.11.5.0/doc/html/LIO-DCLabel.html#t:DC">DC</a></code> actions derived from shooting handle
 <code>sh</code> may be made.
</p></div></div><div class="top"><p class="src"><a name="v:lost" class="def">lost</a> :: <a href="Player.html#t:ShootingHandle">ShootingHandle</a> -&gt; <a href="file:///Users/al24216/Library/Haskell/ghc-7.6.3/lib/lio-0.11.5.0/doc/html/LIO-DCLabel.html#t:DC">DC</a> ()</p><div class="doc"><p><code><code><a href="Player.html#v:lost">lost</a></code> sh</code> returns a <code><a href="file:///Users/al24216/Library/Haskell/ghc-7.6.3/lib/lio-0.11.5.0/doc/html/LIO-DCLabel.html#t:DC">DC</a></code> action that, when run, tells the
 player with shooting handle <code>sh</code> that it has lost the game.  Once
 this <code><a href="file:///Users/al24216/Library/Haskell/ghc-7.6.3/lib/lio-0.11.5.0/doc/html/LIO-DCLabel.html#t:DC">DC</a></code> action has been run, no <code><a href="file:///Users/al24216/Library/Haskell/ghc-7.6.3/lib/lio-0.11.5.0/doc/html/LIO-DCLabel.html#t:DC">DC</a></code> actions derived from shooting
 handle <code>sh</code> may be made.
</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.13.2</p></div></body></html>